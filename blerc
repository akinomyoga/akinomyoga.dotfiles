# blerc -*- mode: sh; mode: sh-bash -*-

# Settings for ble.sh (https://github.com/akinomyoga/ble.sh)

#bleopt_suppress_bash_output=

set -o vi
bleopt char_width_mode=emacs
bleopt indent_offset=2
bleopt decode_isolated_esc=esc
bleopt complete_auto_delay=1
bleopt internal_stackdump_enabled=1
bind 'set skip-completed-text on'

ble-color-setface auto_complete fg=246

#bleopt filename_ls_colors="$LS_COLORS"

ble/array#push _ble_keymap_vi_load_hook blerc/vim-load-hook
function blerc/vim-load-hook {
  bind 'set keyseq-timeout 1'

  case $TERM in
  (xterm*)
    _ble_term_Ss=$'\e[@1 q' ;;
  esac
  bleopt keymap_vi_nmap_cursor=2
  bleopt keymap_vi_imap_cursor=5
  bleopt keymap_vi_omap_cursor=4
  bleopt keymap_vi_xmap_cursor=2
  bleopt keymap_vi_cmap_cursor=0

  source "$_ble_base/lib/vim-surround.sh"
  bleopt vim_surround_q:=\'
  bleopt vim_surround_Q:=\"

  # C-w
  ble-bind -f 'C-w'      'kill-region-or uword'
  ble-bind -m vi_cmap -f 'C-w' 'kill-region-or uword'

  ble-decode/keymap:vi_imap/define-meta-bindings

  source "$_ble_base"/keymap/vi_test.sh
}
